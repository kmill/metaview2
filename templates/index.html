<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<title>{{ handler.settings["app_title"] }}</title>
<link rel="stylesheet" href="{{ static_url("style.css") }}" type="text/css" />
<script type="text/javascript" src="{{ static_url("jquery-ui-1.10.3/jquery-1.9.1.js") }}"></script>
<script type="text/javascript" src="{{ static_url("jquery-ui-1.10.3/ui/jquery-ui.js") }}"></script>
<script type="text/javascript" src="{{ static_url("underscore-min.js") }}"></script>
<script type="text/javascript" src="{{ static_url("mv.js") }}"></script>
<script type="text/javascript" src="{{ static_url("mv-ui.js") }}"></script>

<link type="text/css" rel="stylesheet" href="{{ static_url("jquery.dropdown.css") }}" />
<script type="text/javascript" src="{{ static_url("jquery.dropdown.js") }}"></script>

<script type="text/template" template-name="test-message-entry">
<div><%= data.args.user %>: <%= data.args.m %></div>
</script>

<!-- expects data.webid and data.blobid -->
<script type="text/template" template-name="blob-wrapper">
<div class="blob-wrapper" data-blob-webid="<%= data.webid %>" data-blob-uuid="<%= data.uuid %>">
  <% if (data.content === undefined) { %>
  <em>loading...</em>
  <% } else { %>
  <%= data.content %>
  <% } %>
</div>
</script>

<script type="text/template" template-name="blob-generic">
<div class="blob">
<div class="blob_content">
</div>
</div>
</script>

</head>
<body>

<div id="body">
  <div id="header">
    <div class="header_left">
      Web: <a href="#" data-dropdown="#dropdown-webs"><span data-webname></span></a>
    </div>
    <div class="header_right">
      <form id="fileupload" method="post" enctype="multipart/form-data" action="/upload">
        {% module xsrf_form_html() %}
        <input type="file" name="files" multiple />
        <input type="submit" value="Upload"/>
      </form>
      <a href="#" data-dropdown="#dropdown-upload-notifications">Uploads<span class="uploadNumInProgress" data-num-uploads></span></a> |
      <a href="#" data-dropdown="#dropdown-user">{{ handler.current_user.email }} <div class="user-avatar" data-avatar="{{ handler.current_user.email }}"></div></a>
    </div>
    <div class="clear"></div>
  </div>
  <div id="content">
    <div id="inbox">
    </div>

    <div id="blob-view">
    </div>

    <h2>Poll test</h2>
    <div id="polldest">
    </div>

<form id="test_form">
  <input type="text" name="m"/>
  <input type="submit"/>
</form>


<form id="poll_info_form">
  {% module xsrf_form_html() %}
  <input type="hidden" name="channel_id" value="{{ channel_id }}"/>
</form>



  </div>
  <div id="footer">
    Metaview2 (very experimental) &mdash; Kyle Miller
  </div>
</div>

<div id="dropdown-user" class="dropdown dropdown-tip dropdown-anchor-right">
  <ul class="dropdown-menu">
    <li><a href="/logout">Log out</a></li>
  </ul>
</div>

<div id="dropdown-webs" class="dropdown dropdown-tip">
  <ul id="web_selector" class="dropdown-menu">
  </ul>
  <ul class="dropdown-menu">
    <li><a id="add_web" href="#">Add web</a></li>
  </ul>
</div>

<div id="dropdown-upload-notifications" class="dropdown dropdown-tip dropdown-anchor-right">
  <div class="dropdown-panel">
    <div id="file_upload_notifications"></div>
  </div>
</div>



</body>
</html>
